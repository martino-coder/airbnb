<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Timeware - Complete Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Base & Layout */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f3f4f6; -webkit-tap-highlight-color: transparent; }
        .mobile-container { max-width: 420px; margin: 0 auto; background-color: #f8fafc; min-height: 100vh; position: relative; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 40px rgba(0,0,0,0.1); }
        
        /* Utilities */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .card-shadow { box-shadow: 0 4px 15px -3px rgba(0, 0, 0, 0.05), 0 2px 6px -2px rgba(0, 0, 0, 0.03); }
        
        /* Animations */
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        .slide-up { animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .shimmer { background: #f6f7f8; background-image: linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%); background-repeat: no-repeat; background-size: 800px 104px; animation: shimmer 1.5s linear infinite; }
        @keyframes shimmer { 0% { background-position: -468px 0; } 100% { background-position: 468px 0; } }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* Dashboard Tabs */
        .tab-content { display: none; animation: fadeIn 0.2s ease-out; height: 100%; overflow-y: auto; padding-bottom: 90px; }
        .tab-content.active { display: block; }
        
        /* Navigation */
        .nav-btn { transition: all 0.2s; color: #94a3b8; }
        .nav-btn.active { color: #f43f5e; }
        .nav-btn.active i { transform: translateY(-2px); }

        /* Modals & Sheets */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 50; opacity: 0; pointer-events: none; transition: opacity 0.3s; backdrop-filter: blur(4px); }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        
        .bottom-sheet { position: fixed; bottom: 0; left: 0; right: 0; background: white; border-top-left-radius: 24px; border-top-right-radius: 24px; z-index: 60; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); max-width: 420px; margin: 0 auto; max-height: 90vh; display: flex; flex-direction: column; }
        .bottom-sheet.active { transform: translateY(0); }
        
        .full-screen-modal { position: fixed; inset: 0; background: #f8fafc; z-index: 70; transform: translateY(100%); transition: transform 0.3s ease-in-out; max-width: 420px; margin: 0 auto; overflow-y: auto; }
        .full-screen-modal.active { transform: translateY(0); }

        /* Payment Specifics */
        .processing-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); background: white; padding: 2rem; border-radius: 20px; z-index: 70; opacity: 0; pointer-events: none; transition: all 0.3s; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); text-align: center; width: 80%; max-width: 300px; }
        .processing-modal.active { opacity: 1; pointer-events: auto; transform: translate(-50%, -50%) scale(1); }
        .spinner { border: 4px solid rgba(0, 0, 0, 0.1); width: 36px; height: 36px; border-radius: 50%; border-left-color: #f43f5e; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Custom UI Elements */
        .cal-date.active { background-color: #f43f5e; color: white; box-shadow: 0 4px 10px rgba(244, 63, 94, 0.3); }
        .task-card:active { transform: scale(0.98); transition: transform 0.1s; }
    </style>
</head>
<body>

<div class="mobile-container">

    <div id="screen-login" class="flex-1 flex flex-col p-8 bg-white z-50 absolute inset-0">
        <div class="mt-20 mb-12 text-center slide-up">
            <div class="w-20 h-20 bg-gradient-to-br from-rose-500 to-pink-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold mb-6 mx-auto shadow-xl shadow-rose-200">
                <i class="fas fa-layer-group"></i>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 leading-tight">í˜¸ìŠ¤íŒ…ì˜ ëª¨ë“  ê²ƒ<br>Timeware</h1>
            <p class="text-gray-400 mt-3 text-sm">ìš´ì˜, ì •ì‚°, ê³ ê°ê´€ë¦¬ë¥¼ í•œ ê³³ì—ì„œ.</p>
        </div>
        <div class="mt-auto space-y-3 pb-8 slide-up" style="animation-delay: 0.1s;">
            <button onclick="goToSearch()" class="w-full bg-[#FEE500] text-[#3c1e1e] font-bold py-4 rounded-xl flex items-center justify-center gap-3 active:scale-95 transition-transform shadow-sm">
                <i class="fas fa-comment"></i> ì¹´ì¹´ì˜¤ë¡œ ì‹œì‘í•˜ê¸°
            </button>
            <button onclick="skipToDashboard()" class="w-full mt-4 py-4 text-gray-400 font-bold text-sm bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                (ê°œë°œìš©) ëŒ€ì‹œë³´ë“œ ë°”ë¡œê°€ê¸° <i class="fas fa-arrow-right ml-1"></i>
            </button>
        </div>
    </div>

    <div id="screen-search" class="hidden flex-1 flex-col h-full bg-white z-40 absolute inset-0 fade-in">
        <div class="p-6 pt-12 bg-white sticky top-0 z-10 shadow-sm">
            <h1 class="text-2xl font-bold text-gray-900 leading-tight">ë°˜ê°€ì›Œìš”, í•´ì„±ë‹˜ ğŸ‘‹<br><span class="text-rose-500">ë‚´ ìˆ™ì†Œë¥¼ ì—°ë™í• ê¹Œìš”?</span></h1>
            <p class="text-gray-500 text-sm mt-2">ì—ì–´ë¹„ì•¤ë¹„ì— ë“±ë¡ëœ <strong>ìˆ™ì†Œ ì´ë¦„</strong>ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
        </div>
        <div class="p-6 pb-2 bg-white z-20">
            <div class="relative group">
                <i class="fas fa-search absolute left-4 top-4 text-gray-400 group-focus-within:text-rose-500 transition-colors"></i>
                <input type="text" id="search-input" value="ì²­ì›”" placeholder="ì˜ˆ: ì²­ì›”, ê°•ë‚¨ ì½”ì§€ í•˜ìš°ìŠ¤" class="w-full pl-12 pr-16 py-3.5 bg-gray-50 border border-gray-100 rounded-xl text-gray-800 font-bold outline-none focus:ring-2 focus:ring-rose-500 transition-all" onkeypress="handleEnter(event)">
                <button onclick="searchListing()" class="absolute right-2 top-2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-sm font-bold shadow-md active:scale-95 transition-transform">ê²€ìƒ‰</button>
            </div>
        </div>
        <div class="flex-1 overflow-y-auto p-4 bg-gray-50 space-y-4" id="content-area">
            <div id="loading-state" class="hidden space-y-3">
                <div class="bg-white p-3 rounded-xl shadow-sm flex gap-3"><div class="w-20 h-20 rounded-lg shimmer shrink-0"></div><div class="flex-1 space-y-2 py-2"><div class="h-4 w-3/4 shimmer rounded"></div><div class="h-3 w-1/2 shimmer rounded"></div></div></div>
            </div>
            <div id="result-list" class="space-y-3 hidden pb-20"></div>
        </div>
    </div>

    <div id="screen-success" class="hidden flex-1 flex-col justify-center items-center h-full bg-white z-50 absolute inset-0 fade-in p-8 text-center">
        <div class="w-24 h-24 bg-green-100 text-green-500 rounded-full flex items-center justify-center mb-6 text-4xl pop-in">
            <i class="fas fa-check"></i>
        </div>
        <h2 class="text-2xl font-bold text-gray-900 mb-2 pop-in" style="animation-delay: 0.1s">ì—°ë™ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
        <p class="text-gray-500 mb-10 pop-in" style="animation-delay: 0.2s">Timewareê°€ ê³µë™í˜¸ìŠ¤íŠ¸ ê¶Œí•œìœ¼ë¡œ<br>ìš´ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.</p>
        <button onclick="goToDashboard()" class="w-full bg-rose-500 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-rose-600 active:scale-95 transition-all flex items-center justify-center gap-2 pop-in" style="animation-delay: 0.3s">
            ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•˜ê¸° <i class="fas fa-arrow-right"></i>
        </button>
    </div>

    <div id="screen-dashboard" class="hidden flex-1 flex-col h-full bg-[#f8fafc] z-10 fade-in relative">
        
        <section id="tab-home" class="tab-content active hide-scrollbar">
            <header class="bg-gradient-to-br from-rose-500 to-pink-600 p-6 text-white pt-12 rounded-b-[2rem] mb-6 shadow-lg relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full blur-2xl -mr-10 -mt-10"></div>
                <div class="flex justify-between items-center mb-6 relative z-10">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full border-2 border-white/50 bg-white/20 flex items-center justify-center text-lg">ğŸ‘¨â€ğŸ’»</div>
                        <div><h1 class="text-lg font-bold leading-tight">í•´ì„±ë‹˜</h1><p class="text-xs text-pink-100 opacity-90">Timeware Tech Lead</p></div>
                    </div>
                    <div class="relative"><i class="fas fa-bell text-xl"></i><span class="absolute -top-1 -right-1 w-2.5 h-2.5 bg-yellow-400 rounded-full border-2 border-pink-600"></span></div>
                </div>
                <div class="flex justify-between items-end relative z-10">
                    <div><p class="text-pink-100 text-xs mb-1 font-medium">1ì›” ì˜ˆìƒ ìˆ˜ìµ</p><h2 class="text-3xl font-bold tracking-tight">â‚©4,520,000</h2></div>
                    <div class="text-right"><p class="text-pink-100 text-xs mb-1 font-medium">ê°€ë™ë¥ </p><div class="bg-white/20 backdrop-blur-sm px-3 py-1 rounded-lg"><span class="text-xl font-bold">85%</span><i class="fas fa-arrow-up text-xs ml-1"></i></div></div>
                </div>
            </header>

            <main class="px-5 space-y-5">
                <div class="flex justify-between items-end"><h3 class="font-bold text-gray-800 text-lg">Action Needed</h3><span class="text-xs text-rose-500 font-bold">3ê±´ ëŒ€ê¸°ì¤‘</span></div>

                <div onclick="openTaskDetail()" class="bg-white p-5 rounded-2xl border-l-[6px] border-rose-500 card-shadow active:scale-[0.98] transition-transform cursor-pointer relative overflow-hidden">
                    <div class="flex justify-between items-start mb-2"><span class="bg-rose-50 text-rose-600 text-[10px] font-extrabold px-2 py-1 rounded uppercase tracking-wide">ê¸´ê¸‰</span><span class="text-gray-400 text-xs font-medium">ì²´í¬ì¸ 2ì‹œê°„ ì „</span></div>
                    <h4 class="font-bold text-gray-800 text-lg">201í˜¸ ì²­ì†Œ ë¯¸ì™„ë£Œ</h4>
                    <p class="text-gray-500 text-sm mt-1">ë‹´ë‹¹ í´ë¦¬ë„ˆ ì—°ë½ë‘ì ˆ. ëŒ€ì²´ ì¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                    <div class="mt-3 flex items-center text-xs font-bold text-rose-500">
                        <span>ì§€ê¸ˆ í•´ê²°í•˜ê¸°</span> <i class="fas fa-arrow-right ml-1"></i>
                    </div>
                </div>

                <div onclick="switchTab('manage')" class="bg-white p-5 rounded-2xl border-l-[6px] border-blue-500 card-shadow active:scale-[0.98] transition-transform cursor-pointer relative overflow-hidden mt-4">
                     <div class="flex justify-between items-start mb-2"><span class="bg-blue-50 text-blue-600 text-[10px] font-extrabold px-2 py-1 rounded uppercase tracking-wide">ì •ì‚° ì•Œë¦¼</span></div>
                     <h4 class="font-bold text-gray-800 text-lg">ìš´ì˜ë¹„ ì •ì‚°ì¼ (D-Day)</h4>
                     <p class="text-gray-500 text-sm mt-1">ì²­ì†Œë¹„ ë° êµ¬ë…ë£Œ ê²°ì œê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
                     <div class="mt-3 flex items-center text-xs font-bold text-blue-500"><span>ê²°ì œí•˜ëŸ¬ ê°€ê¸°</span> <i class="fas fa-arrow-right ml-1"></i></div>
                </div>
            </main>
        </section>

        <section id="tab-ops" class="tab-content hide-scrollbar">
            <header class="bg-white p-6 pt-12 pb-4 border-b border-gray-100 sticky top-0 z-10">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-900">ìš´ì˜ ìº˜ë¦°ë”</h1>
                    <button class="w-9 h-9 rounded-full bg-gray-50 flex items-center justify-center text-gray-500"><i class="fas fa-filter"></i></button>
                </div>
                <div class="grid grid-cols-7 gap-2 text-center">
                    <div class="text-[10px] text-gray-400 mb-1">ì¼</div><div class="text-[10px] text-gray-400 mb-1">ì›”</div><div class="text-[10px] text-gray-400 mb-1">í™”</div><div class="text-[10px] text-gray-400 mb-1">ìˆ˜</div><div class="text-[10px] text-gray-400 mb-1">ëª©</div><div class="text-[10px] text-gray-400 mb-1">ê¸ˆ</div><div class="text-[10px] text-gray-400 mb-1">í† </div>
                    <div class="py-2 text-sm text-gray-300">18</div>
                    <div class="py-2 text-sm font-bold text-gray-600">19</div>
                    <div class="py-2 text-sm font-bold text-gray-600">20</div>
                    <div class="py-2 text-sm font-bold text-gray-600 relative">21<div class="w-1 h-1 bg-rose-500 rounded-full absolute bottom-1 left-1/2 -translate-x-1/2"></div></div>
                    <div class="py-2 text-sm font-bold rounded-xl cal-date active">22</div>
                    <div class="py-2 text-sm font-bold text-gray-600">23</div>
                    <div class="py-2 text-sm font-bold text-gray-600">24</div>
                </div>
            </header>
            <main class="px-5 py-6 space-y-4">
                <div class="flex justify-between items-end mb-2">
                    <h2 class="text-lg font-bold text-gray-800">1ì›” 22ì¼ (ëª©)</h2>
                    <span class="text-xs text-gray-400">ì‘ì—… 2ê±´</span>
                </div>
                <div onclick="openReportView()" class="task-card bg-white p-5 rounded-2xl shadow-sm border border-gray-100 relative overflow-hidden cursor-pointer">
                    <div class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500"></div>
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex items-center space-x-2"><span class="text-[10px] font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded">DONE</span><span class="text-xs text-gray-400">13:45 ì™„ë£Œ</span></div><i class="fas fa-chevron-right text-gray-300 text-xs"></i>
                    </div>
                    <h3 class="text-base font-bold text-gray-800 mb-1">í™ëŒ€ í…Œë¼ìŠ¤ #301</h3>
                    <p class="text-xs text-gray-500 mb-3">ì²­ì†Œ ì™„ë£Œ â€¢ ë¦¬í¬íŠ¸ í™•ì¸ í•„ìš”</p>
                    <div class="flex items-center space-x-2 border-t border-gray-50 pt-3"><div class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-[10px] text-gray-500"><i class="fas fa-user"></i></div><span class="text-xs text-gray-600">ê¹€ë¯¸ì†Œ ë§¤ë‹ˆì €</span></div>
                </div>
            </main>
        </section>

        <section id="tab-chat" class="tab-content hide-scrollbar">
            <header class="bg-white p-6 pt-12 border-b border-gray-100 sticky top-0 z-10">
                <div class="flex justify-between items-center mb-4"><h1 class="text-2xl font-bold text-gray-900">í†µí•© ë©”ì‹œì§€í•¨</h1><i class="fas fa-search text-gray-400 text-lg"></i></div>
                <div class="flex gap-2"><button class="px-4 py-1.5 bg-gray-900 text-white rounded-full text-sm font-bold">ì „ì²´</button><button class="px-4 py-1.5 bg-gray-100 text-gray-500 rounded-full text-sm font-medium">ê²ŒìŠ¤íŠ¸</button></div>
            </header>
            <main class="space-y-1">
                <div class="p-5 bg-blue-50/50 active:bg-gray-100 transition-colors cursor-pointer border-b border-gray-50">
                    <div class="flex gap-4"><div class="relative"><div class="w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-xl">ğŸ‘¤</div><span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></span></div><div class="flex-1 overflow-hidden"><div class="flex justify-between items-center mb-1"><h3 class="font-bold text-gray-900">James (201í˜¸)</h3><span class="text-xs text-rose-500 font-bold">ë°©ê¸ˆ ì „</span></div><p class="text-sm text-gray-800 font-medium truncate">ì£¼ì°¨ ê³µê°„ì´ ì–´ë””ì¸ê°€ìš”? ë„ì°©í–ˆìŠµë‹ˆë‹¤.</p><div class="mt-2 flex gap-2"><span class="text-[10px] bg-white border border-gray-200 px-2 py-1 rounded-md text-gray-500"><i class="fas fa-magic text-purple-500 mr-1"></i>AI ë‹µì¥ ì¶”ì²œ</span></div></div></div>
                </div>
            </main>
        </section>

        <section id="tab-manage" class="tab-content hide-scrollbar">
            <header class="bg-white p-6 pt-12 border-b border-gray-100 sticky top-0 z-10">
                <h1 class="text-2xl font-bold text-gray-900">ê´€ë¦¬ ë° ì •ì‚°</h1>
            </header>
            <main class="p-6 space-y-8">
                <div id="billing-card" class="bg-white p-6 rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 relative overflow-hidden transition-all duration-500">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <span class="text-xs font-bold text-gray-400 uppercase tracking-wide block mb-1">1ì›” ì´ ì²­êµ¬ê¸ˆì•¡</span>
                            <div class="flex items-baseline space-x-1"><span class="text-3xl font-black text-gray-900">609,000</span><span class="text-sm text-gray-500">ì›</span></div>
                        </div>
                        <span id="payment-status-badge" class="bg-rose-100 text-rose-600 text-[10px] font-bold px-2 py-1 rounded-full uppercase">ê²°ì œ ëŒ€ê¸°</span>
                    </div>
                    <div class="w-full bg-gray-100 h-2 rounded-full overflow-hidden mb-4"><div id="payment-progress" class="bg-rose-500 h-full w-[80%] transition-all duration-1000"></div></div>
                    <div id="billing-action-area">
                        <p class="text-xs text-gray-500 mb-4 flex items-center"><i class="far fa-clock mr-1.5"></i> ì •ì‚° ê¸°í•œ: ì˜¤ëŠ˜ (1/23) ê¹Œì§€</p>
                        <button onclick="openPaymentSheet()" class="w-full bg-gray-900 text-white py-3 rounded-xl font-bold shadow-md hover:bg-black transition-colors flex justify-center items-center gap-2"><span>ì§€ê¸ˆ ê²°ì œí•˜ê¸°</span> <i class="fas fa-credit-card text-xs"></i></button>
                    </div>
                    <div id="paid-state-area" class="hidden text-center py-2"><p class="text-sm font-bold text-green-600 flex items-center justify-center gap-2"><i class="fas fa-check-circle"></i> ì •ì‚°ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p></div>
                </div>
                <div class="space-y-4">
                    <h3 class="text-sm font-bold text-gray-900">ìƒì„¸ ë‚´ì—­</h3>
                    <div class="bg-white p-4 rounded-xl border border-gray-100 flex justify-between items-center">
                        <div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-blue-50 text-blue-500 flex items-center justify-center"><i class="fas fa-broom"></i></div><div><h4 class="font-bold text-sm text-gray-800">ì²­ì†Œë¹„ (15ê±´)</h4><p class="text-xs text-gray-400">ê±´ë³„ í•©ì‚°</p></div></div><span class="font-bold text-sm">450,000ì›</span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-gray-100 flex justify-between items-center">
                        <div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-purple-50 text-purple-500 flex items-center justify-center"><i class="fas fa-tshirt"></i></div><div><h4 class="font-bold text-sm text-gray-800">ì„¸íƒ êµ¬ë… (Pro)</h4><p class="text-xs text-gray-400">1ì›” ì •ê¸° ê²°ì œ</p></div></div><span class="font-bold text-sm">159,000ì›</span>
                    </div>
                </div>
            </main>
        </section>

        <nav class="fixed bottom-0 w-full max-w-[420px] bg-white border-t border-gray-100 flex justify-around items-center h-[85px] pb-5 z-40 shadow-[0_-5px_20px_rgba(0,0,0,0.03)]">
            <button onclick="switchTab('home')" class="nav-btn active flex flex-col items-center w-16" data-target="home"><i class="fas fa-home text-xl mb-1"></i><span class="text-[10px] font-medium">í™ˆ</span></button>
            <button onclick="switchTab('ops')" class="nav-btn flex flex-col items-center w-16" data-target="ops"><i class="far fa-calendar-alt text-xl mb-1"></i><span class="text-[10px] font-medium">ìš´ì˜</span></button>
            <button onclick="switchTab('chat')" class="nav-btn flex flex-col items-center w-16 relative" data-target="chat"><div class="relative"><i class="far fa-comment-dots text-xl mb-1"></i><span class="absolute -top-1 -right-1 w-2 h-2 bg-rose-500 rounded-full border border-white"></span></div><span class="text-[10px] font-medium">ì±„íŒ…</span></button>
            <button onclick="switchTab('manage')" class="nav-btn flex flex-col items-center w-16" data-target="manage"><i class="fas fa-sliders-h text-xl mb-1"></i><span class="text-[10px] font-medium">ê´€ë¦¬</span></button>
        </nav>
    </div>

</div>

<div id="modal-overlay" class="modal-overlay" onclick="closeAllModals()"></div>

<div id="modal-confirm" class="bottom-sheet">
    <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mt-3 mb-6"></div>
    <div class="px-6 pb-6">
        <h2 class="text-xl font-bold text-gray-900 mb-2">ì´ ìˆ™ì†Œê°€ ë§ë‚˜ìš”?</h2>
        <p class="text-sm text-gray-500 mb-6">ì„ íƒí•˜ì‹  ìˆ™ì†Œì˜ ê³µë™í˜¸ìŠ¤íŠ¸ë¡œ ì—°ë™ì„ ì‹œì‘í•©ë‹ˆë‹¤.</p>
        
        <div class="bg-gray-50 p-4 rounded-xl flex gap-4 mb-6 text-left border border-gray-100">
            <img id="modal-img" src="" class="w-16 h-16 rounded-lg object-cover bg-gray-200 shadow-sm">
            <div><h4 id="modal-title" class="font-bold text-gray-800 text-sm line-clamp-1">ìˆ™ì†Œ ì´ë¦„</h4><p id="modal-loc" class="text-xs text-gray-500 mt-1">ìœ„ì¹˜ ì •ë³´</p><div class="mt-2 text-[10px] text-rose-500 font-mono bg-rose-50 inline-block px-1.5 rounded">ID í™•ì¸ë¨</div></div>
        </div>
        
        <button onclick="finalSelect()" class="w-full bg-rose-500 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-rose-600 active:scale-95 transition-all mb-3">ë„¤, ë§ì•„ìš” (ì—°ë™í•˜ê¸°)</button>
        <button onclick="closeAllModals()" class="w-full py-3 text-gray-400 font-medium text-sm">ì•„ë‹ˆìš”</button>
    </div>
</div>

<div id="sheet-task" class="bottom-sheet">
    <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mt-3 mb-6"></div>
    <div class="px-6 flex-1 overflow-y-auto">
        <header class="mb-6">
            <span class="bg-yellow-50 text-yellow-600 text-[10px] font-bold px-2 py-1 rounded">SCHEDULED</span>
            <h2 class="text-xl font-bold text-gray-900 mt-2">ê°•ë‚¨ ë“€í”Œë ‰ìŠ¤ #104</h2>
            <p class="text-sm text-gray-500">í‘œì¤€ ì²­ì†Œ (Standard Clean)</p>
        </header>
        <div class="bg-gray-50 p-4 rounded-xl mb-6"><div class="grid grid-cols-2 gap-4"><div><span class="text-xs text-gray-400 block">ì²´í¬ì¸</span><span class="text-sm font-bold text-gray-700">ì˜¤ëŠ˜ 15:00</span></div><div><span class="text-xs text-gray-400 block">ì¸ì›</span><span class="text-sm font-bold text-gray-700">4ëª… (ìœ ì•„ 1)</span></div></div></div>
        <h4 class="text-xs font-bold text-gray-400 uppercase mb-3">ë‹´ë‹¹ì</h4>
        <div class="bg-white border border-gray-200 p-3 rounded-xl flex items-center justify-between mb-6"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center">ğŸ‘¤</div><div><span class="font-bold text-sm text-gray-800">ë°•ì„±ì‹¤ ë§¤ë‹ˆì €</span><p class="text-xs text-gray-500">í‰ì  4.9</p></div></div><button class="text-xs text-blue-600 font-bold bg-blue-50 px-3 py-1.5 rounded-lg">ë³€ê²½</button></div>
    </div>
    <div class="p-6 border-t border-gray-100"><button onclick="closeAllModals()" class="w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg">ì‘ì—… ì‹œì‘ ì•Œë¦¼ ë³´ë‚´ê¸°</button></div>
</div>

<div id="modal-report" class="full-screen-modal">
    <header class="px-6 py-4 bg-white border-b border-gray-100 sticky top-0 z-20 flex items-center justify-between">
        <button onclick="closeAllModals()" class="w-8 h-8 flex items-center justify-center text-gray-500"><i class="fas fa-arrow-left"></i></button><h1 class="text-base font-bold text-gray-800">#301 ì²­ì†Œ ë¦¬í¬íŠ¸</h1><button class="w-8 h-8 flex items-center justify-center text-rose-500"><i class="fas fa-share-alt"></i></button>
    </header>
    <div class="p-6 space-y-6">
        <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between"><div><span class="text-xs text-gray-400 block mb-1">ì œì¶œ ì‹œê°„</span><span class="text-sm font-bold text-gray-800">2026.01.22 13:45</span></div><div class="text-right"><span class="text-xs text-gray-400 block mb-1">ì†Œìš” ì‹œê°„</span><span class="text-sm font-bold text-gray-800">1ì‹œê°„ 45ë¶„</span></div></div>
        <div><h3 class="text-sm font-bold text-gray-700 mb-3">í˜„ì¥ ì‚¬ì§„ (4ì¥)</h3><div class="grid grid-cols-2 gap-3"><div class="aspect-square bg-gray-200 rounded-lg overflow-hidden relative"><img src="https://images.unsplash.com/photo-1554995207-c18c203602cb?w=300" class="w-full h-full object-cover"><span class="absolute bottom-2 left-2 text-[10px] text-white bg-black/60 px-2 py-0.5 rounded-full">ê±°ì‹¤</span></div><div class="aspect-square bg-gray-200 rounded-lg overflow-hidden relative"><img src="https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?w=300" class="w-full h-full object-cover"><span class="absolute bottom-2 left-2 text-[10px] text-white bg-black/60 px-2 py-0.5 rounded-full">ì¹¨ì‹¤</span></div><div class="aspect-square bg-gray-200 rounded-lg overflow-hidden relative"><img src="https://images.unsplash.com/photo-1584622050111-993a426fbf0a?w=300" class="w-full h-full object-cover"><span class="absolute bottom-2 left-2 text-[10px] text-white bg-black/60 px-2 py-0.5 rounded-full">ìš•ì‹¤</span></div><div class="aspect-square bg-gray-800 rounded-lg overflow-hidden relative flex items-center justify-center text-white text-xs cursor-pointer">+1ì¥ ë”ë³´ê¸°</div></div></div>
        <div class="bg-red-50 border border-red-100 p-4 rounded-xl"><h3 class="text-xs font-bold text-red-600 mb-2 flex items-center"><i class="fas fa-exclamation-triangle mr-1"></i> íŠ¹ì´ì‚¬í•­ ë³´ê³ </h3><p class="text-sm text-gray-700 leading-relaxed">í™”ì¥ì‹¤ ì„¸ë©´ëŒ€ ë°°ìˆ˜ê°€ ì•½ê°„ ì›í™œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ìŒ ë²ˆ ì²­ì†Œ ë•Œ ë°°ìˆ˜ê´€ í´ë¦¬ë„ˆê°€ í•„ìš”í•´ ë³´ì…ë‹ˆë‹¤.</p></div>
    </div>
</div>

<div id="sheet-payment" class="bottom-sheet">
    <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mt-3 mb-6"></div>
    <div class="px-6 flex-1 overflow-y-auto">
        <h2 class="text-xl font-bold text-gray-900 mb-2">ê²°ì œ ë‚´ì—­ í™•ì¸</h2>
        <p class="text-sm text-gray-500 mb-6">1ì›” ìš´ì˜ë¹„ìš© ì •ì‚°ì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>
        <div class="bg-gray-50 p-4 rounded-xl mb-6 border border-gray-100">
            <div class="flex justify-between mb-2"><span class="text-sm text-gray-500">ì²­ì†Œë¹„ (15ê±´)</span><span class="text-sm font-bold text-gray-800">450,000</span></div>
            <div class="flex justify-between mb-2"><span class="text-sm text-gray-500">ì„¸íƒ êµ¬ë…ë£Œ (Pro)</span><span class="text-sm font-bold text-gray-800">159,000</span></div>
            <div class="w-full h-px bg-gray-200 my-3"></div>
            <div class="flex justify-between items-center"><span class="text-base font-bold text-gray-900">ì´ ê²°ì œê¸ˆì•¡</span><span class="text-xl font-black text-rose-500">609,000ì›</span></div>
        </div>
        <h4 class="text-xs font-bold text-gray-400 uppercase mb-3">ê²°ì œ ìˆ˜ë‹¨</h4>
        <div class="flex gap-3 overflow-x-auto hide-scrollbar pb-2">
            <div class="min-w-[140px] p-3 rounded-xl border-2 border-rose-500 bg-rose-50 relative cursor-pointer"><div class="absolute top-2 right-2 text-rose-500"><i class="fas fa-check-circle"></i></div><div class="w-8 h-5 bg-gray-800 rounded flex items-center justify-center text-white text-[8px] mb-2">VISA</div><p class="text-xs font-bold text-gray-800">ë²•ì¸ì¹´ë“œ</p><p class="text-[10px] text-gray-500">**** 1234</p></div>
            <div class="min-w-[140px] p-3 rounded-xl border border-gray-200 bg-white opacity-50 cursor-pointer"><div class="w-8 h-5 bg-blue-600 rounded flex items-center justify-center text-white text-[8px] mb-2">AMEX</div><p class="text-xs font-bold text-gray-800">ê°œì¸ì¹´ë“œ</p><p class="text-[10px] text-gray-500">**** 5678</p></div>
        </div>
    </div>
    <div class="p-6 border-t border-gray-100 bg-white"><button onclick="processPayment()" class="w-full bg-rose-500 text-white py-4 rounded-xl font-bold shadow-lg shadow-rose-200 hover:bg-rose-600 active:scale-95 transition-all flex justify-center items-center gap-2"><i class="fas fa-lock text-xs opacity-80"></i> <span>609,000ì› ê²°ì œí•˜ê¸°</span></button></div>
</div>

<div id="modal-processing" class="processing-modal">
    <div id="proc-loading"><div class="spinner mb-4"></div><h3 class="font-bold text-gray-900">ê²°ì œ ì§„í–‰ ì¤‘...</h3><p class="text-xs text-gray-500 mt-1">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p></div>
    <div id="proc-success" class="hidden"><div class="w-12 h-12 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl pop-in"><i class="fas fa-check"></i></div><h3 class="font-bold text-gray-900">ê²°ì œ ì™„ë£Œ!</h3><p class="text-xs text-gray-500 mt-1">1ì›” ì •ì‚°ì´ ì •ìƒ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p></div>
</div>

<script>
    /* ============ 1. LOGIN & SEARCH ============ */
    function goToSearch() {
        document.getElementById('screen-login').classList.add('hidden');
        document.getElementById('screen-search').classList.remove('hidden');
    }

    function skipToDashboard() {
        document.getElementById('screen-login').classList.add('hidden');
        document.getElementById('screen-dashboard').classList.remove('hidden');
    }

    // Mock Data
    const MOCK_DB = [{ id: "1024480240214455560", title: "ì²­ì›”(é‘æœˆ) : í‘¸ë¥¸ ë‹¬ì´ ë¨¸ë¬´ëŠ” ê³³", location: "ì„œìš¸, ì¢…ë¡œêµ¬ Â· ë…ì±„", img: "https://images.unsplash.com/photo-1590327773289-53e9dfc6395b?q=80&w=300&auto=format&fit=crop" }];
    let currentSelection = null;

    function handleEnter(e) { if(e.key === 'Enter') searchListing(); }

    function searchListing() {
        const query = document.getElementById('search-input').value;
        if(query.length < 1) { alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
        document.getElementById('result-list').classList.add('hidden');
        document.getElementById('loading-state').classList.remove('hidden');
        
        // Simulate API
        setTimeout(() => { document.getElementById('loading-state').classList.add('hidden'); renderResults(); }, 800);
    }

    function renderResults() {
        const container = document.getElementById('result-list'); container.innerHTML = ''; container.classList.remove('hidden');
        MOCK_DB.forEach(item => {
            const card = document.createElement('div');
            card.className = "bg-white p-3 rounded-xl shadow-sm flex gap-3 active:scale-95 transition-transform cursor-pointer border border-transparent hover:border-rose-300 fade-in";
            card.onclick = () => openConfirm(item);
            card.innerHTML = `<img src="${item.img}" class="w-20 h-20 rounded-lg object-cover bg-gray-100 shrink-0"><div class="flex-1 flex flex-col justify-center min-w-0"><h4 class="font-bold text-gray-800 text-sm line-clamp-1 mb-1">${item.title}</h4><p class="text-xs text-gray-400 truncate"><i class="fas fa-map-marker-alt mr-1"></i>${item.location}</p></div><div class="flex items-center justify-center pl-2"><i class="fas fa-chevron-right text-gray-300 text-xs"></i></div>`;
            container.appendChild(card);
        });
    }

    function openConfirm(item) {
        currentSelection = item;
        document.getElementById('modal-img').src = item.img; document.getElementById('modal-title').innerText = item.title; document.getElementById('modal-loc').innerText = item.location;
        openOverlay();
        document.getElementById('modal-confirm').classList.add('active');
    }

    function finalSelect() {
        closeAllModals();
        document.getElementById('screen-search').classList.add('hidden');
        document.getElementById('screen-success').classList.remove('hidden');
    }

    function goToDashboard() {
        document.getElementById('screen-success').classList.add('hidden');
        document.getElementById('screen-dashboard').classList.remove('hidden');
    }

    /* ============ 2. DASHBOARD TABS ============ */
    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active', 'text-rose-500'));
        document.getElementById('tab-' + tabId).classList.add('active');
        document.querySelector(`.nav-btn[data-target="${tabId}"]`).classList.add('active', 'text-rose-500');
        window.scrollTo(0,0);
    }

    /* ============ 3. MODALS (OPS & PAYMENT) ============ */
    function openOverlay() { document.getElementById('modal-overlay').classList.add('active'); }
    
    function closeAllModals() {
        document.getElementById('modal-overlay').classList.remove('active');
        document.querySelectorAll('.bottom-sheet').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.full-screen-modal').forEach(el => el.classList.remove('active'));
        document.getElementById('modal-processing').classList.remove('active');
    }

    function openTaskDetail() { openOverlay(); document.getElementById('sheet-task').classList.add('active'); }
    function openReportView() { document.getElementById('modal-report').classList.add('active'); }
    function openPaymentSheet() { openOverlay(); document.getElementById('sheet-payment').classList.add('active'); }

    /* ============ 4. PAYMENT LOGIC ============ */
    function processPayment() {
        document.getElementById('sheet-payment').classList.remove('active');
        document.getElementById('modal-processing').classList.add('active');
        setTimeout(() => {
            document.getElementById('proc-loading').classList.add('hidden');
            document.getElementById('proc-success').classList.remove('hidden');
            document.getElementById('proc-success').querySelector('div').classList.add('pop-in');
            updateDashboardToPaid();
        }, 2000);
        setTimeout(() => {
            closeAllModals();
            setTimeout(() => { document.getElementById('proc-loading').classList.remove('hidden'); document.getElementById('proc-success').classList.add('hidden'); }, 500);
        }, 3500);
    }

    function updateDashboardToPaid() {
        const badge = document.getElementById('payment-status-badge');
        badge.className = "bg-green-100 text-green-600 text-[10px] font-bold px-2 py-1 rounded-full uppercase"; badge.innerText = "ì •ì‚° ì™„ë£Œ";
        const progress = document.getElementById('payment-progress');
        progress.classList.replace('bg-rose-500', 'bg-green-500'); progress.style.width = "100%";
        document.getElementById('billing-action-area').classList.add('hidden');
        document.getElementById('paid-state-area').classList.remove('hidden');
    }
</script>

</body>
</html>
